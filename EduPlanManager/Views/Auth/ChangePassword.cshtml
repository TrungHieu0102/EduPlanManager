@model EduPlanManager.Models.DTOs.Auth.ChangePasswordRequest

<h4 class="text-center mb-4">Đổi Mật Khẩu</h4>

<form method="post" action="/auth/change-password" class="pt-3">

    <div class="row gy-3">
        <!-- Mật khẩu cũ -->
        <div class="col-12">
            <div class="form-floating mb-3">
                <input asp-for="OldPassword" type="password" class="form-control" id="OldPassword" placeholder="Mật khẩu cũ" required>
                <label for="OldPassword" class="form-label">Mật khẩu cũ</label>
                <button type="button" class="btn btn-link position-absolute top-50 end-0 translate-middle-y" id="toggleOldPassword">
                    <i class="bi bi-eye" id="eye-icon-old"></i>
                </button>
            </div>
        </div>

        <!-- Mật khẩu mới -->
        <div class="col-12">
            <div class="form-floating mb-3 position-relative">
                <input asp-for="NewPassword" type="password" class="form-control" id="NewPassword" placeholder="Mật khẩu mới" required>
                <label for="NewPassword" class="form-label">Mật khẩu mới</label>
                <button type="button" class="btn btn-link position-absolute top-50 end-0 translate-middle-y" id="toggleNewPassword">
                    <i class="bi bi-eye" id="eye-icon-new"></i>
                </button>
            </div>
        </div>

        <!-- Xác nhận mật khẩu mới -->
        <div class="col-12">
            <div class="form-floating mb-3 position-relative">
                <input asp-for="ConfirmPassword" type="password" class="form-control" id="ConfirmPassword" placeholder="Xác nhận mật khẩu mới" required>
                <label for="ConfirmPassword" class="form-label">Xác nhận mật khẩu mới</label>
                <button type="button" class="btn btn-link position-absolute top-50 end-0 translate-middle-y" id="toggleConfirmPassword">
                    <i class="bi bi-eye" id="eye-icon-confirm"></i>
                </button>
            </div>
        </div>

        <!-- Nút Đổi Mật khẩu -->
        <div class="col-12">
            <div class="d-grid">
                <button class="btn btn-primary btn-lg" type="submit">Đổi mật khẩu</button>
            </div>
        </div>
    </div>
</form>

@if (TempData["SuccessMessage"] != null)
{
    <div class="alert alert-success">
        @TempData["SuccessMessage"]
    </div>
}

@Html.ValidationSummary(true, "", new { @class = "text-danger" })

<script src="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.js"></script> <!-- Thêm thư viện icon -->

<script>
    // Toggle mật khẩu cho trường "OldPassword"
    document.getElementById("toggleOldPassword").addEventListener("click", function () {
        var oldPasswordField = document.getElementById("OldPassword");
        var eyeIconOld = document.getElementById("eye-icon-old");

        if (oldPasswordField.type === "password") {
            oldPasswordField.type = "text";
            eyeIconOld.classList.remove("bi-eye");
            eyeIconOld.classList.add("bi-eye-slash");
        } else {
            oldPasswordField.type = "password";
            eyeIconOld.classList.remove("bi-eye-slash");
            eyeIconOld.classList.add("bi-eye");
        }
    });

    // Toggle mật khẩu cho trường "NewPassword"
    document.getElementById("toggleNewPassword").addEventListener("click", function () {
        var newPasswordField = document.getElementById("NewPassword");
        var eyeIconNew = document.getElementById("eye-icon-new");

        if (newPasswordField.type === "password") {
            newPasswordField.type = "text";
            eyeIconNew.classList.remove("bi-eye");
            eyeIconNew.classList.add("bi-eye-slash");
        } else {
            newPasswordField.type = "password";
            eyeIconNew.classList.remove("bi-eye-slash");
            eyeIconNew.classList.add("bi-eye");
        }
    });

    // Toggle mật khẩu cho trường "ConfirmPassword"
    document.getElementById("toggleConfirmPassword").addEventListener("click", function () {
        var confirmPasswordField = document.getElementById("ConfirmPassword");
        var eyeIconConfirm = document.getElementById("eye-icon-confirm");

        if (confirmPasswordField.type === "password") {
            confirmPasswordField.type = "text";
            eyeIconConfirm.classList.remove("bi-eye");
            eyeIconConfirm.classList.add("bi-eye-slash");
        } else {
            confirmPasswordField.type = "password";
            eyeIconConfirm.classList.remove("bi-eye-slash");
            eyeIconConfirm.classList.add("bi-eye");
        }
    });
</script>
